{"version":3,"sources":["../../src/addon/qrscanner/pages/my-qrscanner/my-qrscanner.module.ts","../../src/addon/qrscanner/pages/my-qrscanner/my-qrscanner.ts"],"names":[],"mappings":"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","file":"60.js","sourcesContent":["// (C) Copyright 2015 Martin Dougiamas\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { CoreComponentsModule } from '@components/components.module';\nimport { CoreDirectivesModule } from '@directives/directives.module';\nimport { CorePipesModule } from '@pipes/pipes.module';\nimport { AddonQRScannerPage } from './my-qrscanner';\n\n\n@NgModule({\n    declarations: [\n        AddonQRScannerPage,\n    ],\n    imports: [\n        CoreComponentsModule,\n        CoreDirectivesModule,\n        CorePipesModule,\n        IonicPageModule.forChild(AddonQRScannerPage),\n        TranslateModule.forChild()\n    ],\n})\nexport class AddonQRScannerInputInfoPagePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/addon/qrscanner/pages/my-qrscanner/my-qrscanner.module.ts","// (C) Copyright 2015 Martin Dougiamas\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport { Component, ViewChild, OnInit, OnDestroy } from '@angular/core';\nimport { IonicPage, Searchbar, Toast, NavController, NavParams, ViewController, AlertController } from 'ionic-angular';\nimport { CoreUtilsProvider } from '@providers/utils/utils';\nimport { CoreSitesProvider } from '@providers/sites';\nimport { DataService } from '@providers/data.service';\nimport { CoreEventsProvider } from '@providers/events';\nimport { CoreAppProvider } from '@providers/app';\nimport { CoreTabsComponent } from '@components/tabs/tabs';\nimport { AddonQRScannerProvider } from '../../providers/qrscanner';\nimport { TranslateService } from '@ngx-translate/core';\nimport { QRScanner, QRScannerStatus } from '@ionic-native/qr-scanner';\n\n/**\n * Page that displays the list of calendar events.\n */\n@IonicPage({ segment: 'addon-qrscanner' })\n@Component({\n    selector: 'page-addon-my-qrscanner',\n    templateUrl: 'my-qrscanner.html',\n})\nexport class AddonQRScannerPage implements OnInit, OnDestroy {\n    @ViewChild(CoreTabsComponent) tabsComponent: CoreTabsComponent;\n    @ViewChild('searchbar') searchbar: Searchbar;\n\n    ionApp: any;\n    ionicTabbar: any;\n\n    protected light = false;\n    protected frontCamera = false;\n    protected scanningError: Toast;\n    protected validate: any;\n    pageLoaded = false;\n\n    constructor(private navCtrl: NavController, private navParams: NavParams, private qrScanner: QRScanner,\n                private viewController: ViewController, public alertController: AlertController,  private data: DataService) {\n                    this.setupScanner();\n                }\n    /**\n     * View loaded.\n     */\n    ionViewDidLoad(): void {\n        this.pageLoaded = true;\n    }\n\n    closeCamera(data: any = null): void {\n        // Remove this.viewController.dismiss(data);\n        this.navCtrl.setRoot(\"CoreLoginInitPage\");\n    }\n\n    toggleCamera(): void {\n        this.frontCamera = !this.frontCamera;\n\n        if (this.frontCamera) {\n            this.qrScanner.useFrontCamera();\n        } else {\n            this.qrScanner.useBackCamera();\n        }\n    }\n\n    toggleLight(): void {\n        this.light = !this.light;\n\n        if (this.light) {\n            this.qrScanner.enableLight();\n        } else {\n            this.qrScanner.disableLight();\n        }\n    }\n\n    setupScanner(): void {\n        this.qrScanner.prepare()\n            .then((status: QRScannerStatus) => {\n                if (status.authorized) {\n                    const scanSub = this.qrScanner.scan().subscribe((text: string) => {\n                    this.dataHandle(text);\n\n                    this.qrScanner.hide(); // Hide camera preview\n                    scanSub.unsubscribe(); // Stop scanning\n                });\n\n                } else if (status.denied) {\n                    this.qrScanner.openSettings();\n                } else {\n                // Permission was denied, but not permanently. You can ask for permission again at a later time.\n                }\n            })\n            .catch((e: any) => console.log('Error is', e));\n    }\n\n    dataHandle(data: any): void {\n        try {\n            const obj = JSON.parse(data);\n          if (this.checkDataHandle(obj)) {\n            switch (obj.type) {\n              case 'EVALUATE':\n                  this.data.setData(obj.value, 'scanner');\n                  this.navCtrl.popToRoot();\n                  this.navCtrl.parent.select(2);\n              break;\n              case 'COURSE':\n                  this.navCtrl.push('CoreCourseSectionPage', { course: { id: obj.value } });\n              break;\n            }\n          }\n        } catch(e) {}\n    }\n\n    checkDataHandle(obj: any): boolean {\n        let result = false;\n        const teamplateData = {type: '', value: ''};\n        for (const el in obj) {\n          result = teamplateData.hasOwnProperty(el);\n        }\n  \n        return result;\n      }\n\n    ionViewWillEnter(): void {\n        this.setupScanner();\n        this.qrScanner.show();\n        window.document.querySelector('ion-app > .app-root').classList.add('transparentBody');\n    }\n\n    ionViewWillLeave(): void {\n        // Hide window.document.querySelector('ion-app > .app-root').classList.remove('hide');\n        this.qrScanner.destroy();\n    }\n\n    ionViewCanEnter(): boolean {\n        if (this.qrScanner) {\n            return true;\n        } else {\n            return false;\n        }\n    }\n\n    /**\n     * Component being initialized.\n     */\n    ngOnInit(): void {}\n    /**\n     * Page destroyed.\n     */\n    ngOnDestroy(): void {}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/addon/qrscanner/pages/my-qrscanner/my-qrscanner.ts"],"sourceRoot":""}